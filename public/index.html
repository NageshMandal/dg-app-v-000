<!doctype html>
<html lang="en" data-bs-theme="auto">
  <head><script src="./function/bootstrap-js-dg-app/color-modes.js"></script>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.122.0">
    <title>Sidebars Â· Bootstrap v5.3</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/5.3/examples/sidebars/">
    <link href="./beauty/bootstrap-dg-app/dashboard.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.min.css" rel="stylesheet">
    <link rel="canonical" href="https://getbootstrap.com/docs/5.3/examples/dashboard/">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">

    

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3">

<link href="./beauty/bootstrap-dg-app/bootstrap.min.css" rel="stylesheet">
<link href="./beauty/bootstrap-dg-app" rel="stylesheet">
<!-- Inside your HTML file, preferably in a <style> tag or linked CSS file -->
  <style>
    /* Adjust padding if needed */
    .table th,
    .table td {
        padding: 0.75rem;
        vertical-align: middle;
    }
    
    /* Optional: Increase row height for better readability */
    .table tbody tr {
        height: 3rem;
    }
</style>

    <style>
      
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }

      .b-example-divider {
        width: 100%;
        height: 3rem;
        background-color: rgba(0, 0, 0, .1);
        border: solid rgba(0, 0, 0, .15);
        border-width: 1px 0;
        box-shadow: inset 0 .5em 1.5em rgba(0, 0, 0, .1), inset 0 .125em .5em rgba(0, 0, 0, .15);
      }

      .b-example-vr {
        flex-shrink: 0;
        width: 1.5rem;
        height: 100vh;
      }

      .bi {
        vertical-align: -.125em;
        fill: currentColor;
      }

      .nav-scroller {
        position: relative;
        z-index: 2;
        height: 2.75rem;
        overflow-y: hidden;
      }

      .nav-scroller .nav {
        display: flex;
        flex-wrap: nowrap;
        padding-bottom: 1rem;
        margin-top: -1px;
        overflow-x: auto;
        text-align: center;
        white-space: nowrap;
        -webkit-overflow-scrolling: touch;
      }

      .btn-bd-primary {
        --bd-violet-bg: #712cf9;
        --bd-violet-rgb: 112.520718, 44.062154, 249.437846;

        --bs-btn-font-weight: 600;
        --bs-btn-color: var(--bs-white);
        --bs-btn-bg: var(--bd-violet-bg);
        --bs-btn-border-color: var(--bd-violet-bg);
        --bs-btn-hover-color: var(--bs-white);
        --bs-btn-hover-bg: #6528e0;
        --bs-btn-hover-border-color: #6528e0;
        --bs-btn-focus-shadow-rgb: var(--bd-violet-rgb);
        --bs-btn-active-color: var(--bs-btn-hover-color);
        --bs-btn-active-bg: #5a23c8;
        --bs-btn-active-border-color: #5a23c8;
      }

      .bd-mode-toggle {
        z-index: 1500;
      }

      .bd-mode-toggle .dropdown-menu .active .bi {
        display: block !important;
      }

      .nav-feature {
        display: inline-block;
        padding: 0.5rem 1rem;
        color: #6c757d;
        text-decoration: none;
        font-weight: bold;
    }
    .nav-feature.active {
        color: #000;
        text-decoration: underline;
    }
    .nav-feature:hover {
        color: #0056b3;
        text-decoration: underline;
    }
    
  #dg-app-user-content {
      overflow: auto;
      height: 40rem; /* Take up full height of the viewport */
      
  }
  .table {
    font-size: 0.8rem; /* smaller font size */
  }
  #navbar{
    background-color: #f8f9fa;
    margin-top: 10px;  
    border-radius: 8px;
    border-bottom: #dedede solid 1px;
  }
  #export{
    margin-right: 20px;
  }
  #search{
    width: 350px;
    margin-left: 10px;
    position: relative;
    bottom: 3px;
  }
  .bi{
    margin-right: 7px;
  }
  .bi-plus-lg{
    position: relative;
    top: 1px;
    margin-left: 6px;
    transition: transform 0.3s ease-in-out;
  }
  .bi-plus-lg:hover {
    transform: rotate(90deg); /* Rotate the icon 90 degrees */
  }
  #dropdown-clp{
    margin-left: 8px;
  }
  #dropdown-clp li a{
    margin-top: 5px;
  }
    </style>

    
    <!-- Custom styles for this template -->
    <link href="./beauty/bootstrap-dg-app/bootstrap-sidebar-clopsable-dg-app.css" rel="stylesheet">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
  </head>
<body>

   <div class="container-fluid">
    <div class="row">
      <div class="sidebar col-md-3 col-lg-2 p-0 ">
        <div class="offcanvas-md offcanvas-end bg-body-tertiary" tabindex="-1" id="sidebarMenu" aria-labelledby="sidebarMenuLabel">
          <div class="offcanvas-header">
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#sidebarMenu" aria-label="Close"></button>
          </div>
          <section id="sidebar-dg-app">
            <svg xmlns="http://www.w3.org/2000/svg" class="d-none">
              <symbol id="bootstrap" viewBox="0 0 118 94">
                <title>Bootstrap</title>
                <path fill-rule="evenodd" clip-rule="evenodd" d="M24.509 0c-6.733 0-11.715 5.893-11.492 12.284.214 6.14-.064 14.092-2.066 20.577C8.943 39.365 5.547 43.485 0 44.014v5.972c5.547.529 8.943 4.649 10.951 11.153 2.002 6.485 2.28 14.437 2.066 20.577C12.794 88.106 17.776 94 24.51 94H93.5c6.733 0 11.714-5.893 11.491-12.284-.214-6.14.064-14.092 2.066-20.577 2.009-6.504 5.396-10.624 10.943-11.153v-5.972c-5.547-.529-8.934-4.649-10.943-11.153-2.002-6.484-2.28-14.437-2.066-20.577C105.214 5.894 100.233 0 93.5 0H24.508zM80 57.863C80 66.663 73.436 72 62.543 72H44a2 2 0 01-2-2V24a2 2 0 012-2h18.437c9.083 0 15.044 4.92 15.044 12.474 0 5.302-4.01 10.049-9.119 10.88v.277C75.317 46.394 80 51.21 80 57.863zM60.521 28.34H49.948v14.934h8.905c6.884 0 10.68-2.772 10.68-7.727 0-4.643-3.264-7.207-9.012-7.207zM49.948 49.2v16.458H60.91c7.167 0 10.964-2.876 10.964-8.281 0-5.406-3.903-8.178-11.425-8.178H49.948z"></path>
              </symbol>
              <symbol id="home" viewBox="0 0 16 16">
                <path d="M8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4.5a.5.5 0 0 0 .5-.5v-4h2v4a.5.5 0 0 0 .5.5H14a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146zM2.5 14V7.707l5.5-5.5 5.5 5.5V14H10v-4a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v4H2.5z"/>
              </symbol>
              <symbol id="speedometer2" viewBox="0 0 16 16">
                <path d="M8 4a.5.5 0 0 1 .5.5V6a.5.5 0 0 1-1 0V4.5A.5.5 0 0 1 8 4zM3.732 5.732a.5.5 0 0 1 .707 0l.915.914a.5.5 0 1 1-.708.708l-.914-.915a.5.5 0 0 1 0-.707zM2 10a.5.5 0 0 1 .5-.5h1.586a.5.5 0 0 1 0 1H2.5A.5.5 0 0 1 2 10zm9.5 0a.5.5 0 0 1 .5-.5h1.5a.5.5 0 0 1 0 1H12a.5.5 0 0 1-.5-.5zm.754-4.246a.389.389 0 0 0-.527-.02L7.547 9.31a.91.91 0 1 0 1.302 1.258l3.434-4.297a.389.389 0 0 0-.029-.518z"/>
                <path fill-rule="evenodd" d="M0 10a8 8 0 1 1 15.547 2.661c-.442 1.253-1.845 1.602-2.932 1.25C11.309 13.488 9.475 13 8 13c-1.474 0-3.31.488-4.615.911-1.087.352-2.49.003-2.932-1.25A7.988 7.988 0 0 1 0 10zm8-7a7 7 0 0 0-6.603 9.329c.203.575.923.876 1.68.63C4.397 12.533 6.358 12 8 12s3.604.532 4.923.96c.757.245 1.477-.056 1.68-.631A7 7 0 0 0 8 3z"/>
              </symbol>
              <symbol id="table" viewBox="0 0 16 16">
                <path d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm15 2h-4v3h4V4zm0 4h-4v3h4V8zm0 4h-4v3h3a1 1 0 0 0 1-1v-2zm-5 3v-3H6v3h4zm-5 0v-3H1v2a1 1 0 0 0 1 1h3zm-4-4h4V8H1v3zm0-4h4V4H1v3zm5-3v3h4V4H6zm4 4H6v3h4V8z"/>
              </symbol>
              <symbol id="people-circle" viewBox="0 0 16 16">
                <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
                <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"/>
              </symbol>
              <symbol id="grid" viewBox="0 0 16 16">
                <path d="M1 2.5A1.5 1.5 0 0 1 2.5 1h3A1.5 1.5 0 0 1 7 2.5v3A1.5 1.5 0 0 1 5.5 7h-3A1.5 1.5 0 0 1 1 5.5v-3zM2.5 2a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zm6.5.5A1.5 1.5 0 0 1 10.5 1h3A1.5 1.5 0 0 1 15 2.5v3A1.5 1.5 0 0 1 13.5 7h-3A1.5 1.5 0 0 1 9 5.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zM1 10.5A1.5 1.5 0 0 1 2.5 9h3A1.5 1.5 0 0 1 7 10.5v3A1.5 1.5 0 0 1 5.5 15h-3A1.5 1.5 0 0 1 1 13.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zm6.5.5A1.5 1.5 0 0 1 10.5 9h3a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 9 13.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3z"/>
              </symbol>
            </svg>
              <div class="flex-shrink-0 p-3" style="width: 255px;">
                  <a href="/" class="d-flex align-items-center pb-3 mb-3 link-body-emphasis text-decoration-none border-bottom">
                    <span class="fs-5 fw-semibold"><img  width="auto" height="64" src="./assets/dg-app-logo/ducis group logo v 0-0-2 trans dark.png" alt=""></span>
                  </a>
                  <ul class="list-unstyled ps-0">
                    <li class="mb-1">
                      <button class="btn btn-toggle d-inline-flex align-items-center rounded border-0 collapsed" data-bs-toggle="collapse" data-bs-target="#home-collapse" aria-expanded="true">
                        New
                      </button>
                      <div class="collapse" id="home-collapse">
                        <ul id="dropdown-clp" class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                          <li><a href="#" class="link-body-emphasis d-inline-flex text-decoration-none rounded nav-link" data-target="org" >Ogranisation <i class="bi bi-plus-lg"></i></a></li>
                          <li><a href="#" class="link-body-emphasis d-inline-flex text-decoration-none rounded nav-link" data-target="team" >Team <i class="bi bi-plus-lg"></i></a></li>
                          <li><a href="#" class="link-body-emphasis d-inline-flex text-decoration-none rounded nav-link" data-target="project" >Project <i class="bi bi-plus-lg"></i></a></li>
                          <li><a href="#" class="link-body-emphasis d-inline-flex text-decoration-none rounded nav-link" data-target="ticket" >Ticket <i class="bi bi-plus-lg"></i></a></li>
                          <li><a href="#" class="link-body-emphasis d-inline-flex text-decoration-none rounded nav-link" data-target="lead" >Lead <i class="bi bi-plus-lg"></i></a></li>
                        </ul>
                      </div>
                    </li>
                    <li class="border-top my-3"></li>
                  </ul>
                  <ul class="nav nav-pills flex-column mb-auto">
                    <li>
                      <a href="#" class="nav-link link-body-emphasis" data-target="dashboard">
                        <svg class="bi pe-none me-2" width="16" height="16"><use xlink:href="#speedometer2"/></svg>
                        Dashboard
                      </a>
                    </li>
                    <li>
                      <a href="#" class="nav-link link-body-emphasis" data-target="openTickets">
                        <svg class="bi pe-none me-2" width="16" height="16"><use xlink:href="#table"/></svg>
                        Open Tickets
                      </a>
                    </li>
                    <li>
                      <a href="#" class="nav-link link-body-emphasis" data-target="closedTickets">
                        <svg class="bi pe-none me-2" width="16" height="16"><use xlink:href="#grid"/></svg>
                        Closed Tickets
                      </a>
                    </li>
                    <li>
                      <a href="#" class="nav-link link-body-emphasis" data-target="resentActivity">
                        <svg class="bi pe-none me-2" width="16" height="16"><use xlink:href="#grid"/></svg>
                        Recent activity
                      </a>
                    </li>
                    <li>
                      <a href="#" class="nav-link link-body-emphasis">
                        <i class="bi bi-collection"></i>
                        Draft
                      </a>
                    </li>
                    <li>
                      <a href="#" class="nav-link link-body-emphasis">
                        <i class="bi bi-inbox"></i>
                        Inbox
                      </a>
                    </li>
                    <li>
                      <a href="#" class="nav-link link-body-emphasis">
                        <i class="bi bi-collection"></i>
                        My Collections
                      </a>
                    </li>
                    <li>
                      <a href="#" class="nav-link link-body-emphasis">
                        <i class="bi bi-bookmark-dash"></i>
                        My Tags
                      </a>
                    </li>
                    <li>
                      <a href="#" class="nav-link link-body-emphasis" data-target="organization" id="collectionsLink">
                        <i class="bi bi-building"></i>
                        My Organisation
                      </a>
                    </li>
                    <li>
                      <a href="#" class="nav-link link-body-emphasis" data-target="teamlist" id="team" onclick="fetchAndDisplayTeams()">
                        <i class="bi bi-people"></i>
                        My Team
                      </a>
                    </li>


                    <li>
                      <a href="#" class="nav-link link-body-emphasis" data-target="leadlist" id="leads" >
                        <i class="bi bi-person-lines-fill"></i>
                        My Leads
                      </a>
                    </li>
                    <li>
                      <a href="#" class="nav-link link-body-emphasis" data-target="projectlist" id="projects">
                        <i class="bi bi-folder"></i>
                        My Projects
                      </a>
                    </li>
                    <li>
                      <a href="#" class="nav-link link-body-emphasis" data-target="ticketlist" id="tickets">
                        <i class="bi bi-ticket-perforated"></i>
                        My Tickets
                      </a>
                    </li>

                    <li>
                      <a href="#" class="nav-link link-body-emphasis">
                        <i class="bi bi-calendar-day"></i>
                        My Calender
                      </a>
                    </li>
                  </ul>
                  <ul class="list-unstyled ps-0">
                  <li class="border-top my-3"></li>
                    <li class="mb-1">
                      <button class="btn btn-toggle d-inline-flex align-items-center rounded border-0 collapsed" data-bs-toggle="collapse" data-bs-target="#account-collapse" aria-expanded="false">
                          <svg class="bi pe-none me-2" width="16" height="16"><use xlink:href="#speedometer2"/></svg>Account
                      </button>
                      <div class="collapse" id="account-collapse">
                        <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                          <li><a href="#" class="link-body-emphasis d-inline-flex text-decoration-none rounded">Setting
                          </a></li>
                          <li><a href="#" class="link-body-emphasis d-inline-flex text-decoration-none rounded"> Subscriptions
                            </a></li>
                          <li><a href="#" class="link-body-emphasis d-inline-flex text-decoration-none rounded">Integrated Services</a></li>
                          <li><a href="#" class="link-body-emphasis d-inline-flex text-decoration-none rounded">Sign out</a></li>
                        </ul>
                      </div>
                    </li>
                    <li class="border-top my-3"></li>
                    </ul>
                </div>
          </section>
        </div>
      </div>
  
      <main class="col-md-9 ms-sm-auto col-lg-10">
        <div id="navbar" class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3">
          <input id="search"  type="text" class="form-control" placeholder="Search...">
          <div class="btn-toolbar mb-2 mb-md-0">
            <div class="btn-group me-2">
              <button type="button" class="btn btn-sm btn-outline-secondary">Share</button>
              <button  type="button" class="btn btn-sm btn-outline-secondary">Export</button>
            </div>
            <button id="export" type="button" class="btn btn-sm btn-outline-secondary dropdown-toggle d-flex align-items-center gap-1">
              <svg class="bi"><use xlink:href="#calendar3"/></svg>
              This week
            </button>
          </div>
        </div>

        <div id="dg-app-user-content">
          
        </div>

      </main>
      
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
        const ticketsLink = document.getElementById('tickets');
        ticketsLink.addEventListener('click', async (event) => {
            event.preventDefault(); // Prevent default link behavior
            await fetchAndDisplayTickets(); // Fetch tickets when link is clicked
        });
    });

    async function fetchAndDisplayTickets() {
      try {
          const response = await fetch('/tickets'); // Fetch data from the backend
          if (!response.ok) {
              throw new Error('Network response was not ok');
          }
          const tickets = await response.json(); // Parse JSON response
  
          const ticketListContainer = document.getElementById('ticketList');
          ticketListContainer.innerHTML = ''; // Clear any existing table rows
  
          // Iterate through the tickets and create table rows
          tickets.forEach(ticket => {
              const row = document.createElement('tr');
  
              // Create table cells for each ticket property
              const titleCell = document.createElement('td');
              titleCell.textContent = ticket.title;
              row.appendChild(titleCell);
  
              const descriptionCell = document.createElement('td');
              descriptionCell.textContent = ticket.description;
              row.appendChild(descriptionCell);
  
              const statusCell = document.createElement('td');
              statusCell.textContent = ticket.status;
              row.appendChild(statusCell);
  
              const priorityCell = document.createElement('td');
              priorityCell.textContent = ticket.priority;
              row.appendChild(priorityCell);
  
              const assignedToCell = document.createElement('td');
              assignedToCell.textContent = ticket.assignedTo;
              row.appendChild(assignedToCell);
  
              const projectIdCell = document.createElement('td');
              projectIdCell.textContent = ticket.projectId;
              row.appendChild(projectIdCell);
  
              // Create edit button
              const editButtonCell = document.createElement('td');
              const editButton = document.createElement('button');
              editButton.textContent = 'Edit';
              editButton.classList.add('btn', 'btn-primary', 'btn-sm');
              editButton.onclick = () => editTicket(ticket._id);
              editButtonCell.appendChild(editButton);
              row.appendChild(editButtonCell);
  
              // Create delete button
              const deleteButtonCell = document.createElement('td');
              const deleteButton = document.createElement('button');
              deleteButton.textContent = 'Delete';
              deleteButton.classList.add('btn', 'btn-danger', 'btn-sm');
              deleteButton.onclick = () => deleteTicket(ticket._id);
              deleteButtonCell.appendChild(deleteButton);
              row.appendChild(deleteButtonCell);
  
              // Append row to the table body
              ticketListContainer.appendChild(row);
          });
      } catch (error) {
          console.error('There has been a problem with your fetch operation:', error);
      }
  }
  

    async function editTicket(ticketId) {
        try {
            const response = await fetch(`/tickets/${ticketId}`);
            if (!response.ok) {
                throw new Error('Failed to fetch ticket details');
            }
            const ticket = await response.json();

            const formContainer = document.createElement('div');
            formContainer.classList.add('container', 'mt-5');

            const formTitle = document.createElement('h2');
            formTitle.textContent = 'Edit Ticket';

            const form = document.createElement('form');
            form.id = 'editTicketForm';

            // Title input field
            const titleLabel = document.createElement('label');
            titleLabel.setAttribute('for', 'editTicketTitle');
            titleLabel.textContent = 'Title';

            const titleInput = document.createElement('input');
            titleInput.type = 'text';
            titleInput.classList.add('form-control');
            titleInput.id = 'editTicketTitle';
            titleInput.value = ticket.title;
            titleInput.required = true;

            // Description input field
            const descriptionLabel = document.createElement('label');
            descriptionLabel.setAttribute('for', 'editTicketDescription');
            descriptionLabel.textContent = 'Description';

            const descriptionInput = document.createElement('textarea');
            descriptionInput.classList.add('form-control');
            descriptionInput.id = 'editTicketDescription';
            descriptionInput.textContent = ticket.description;
            descriptionInput.required = true;

            // Status input field
            const statusLabel = document.createElement('label');
            statusLabel.setAttribute('for', 'editTicketStatus');
            statusLabel.textContent = 'Status';

            const statusInput = document.createElement('select');
            statusInput.classList.add('form-control');
            statusInput.id = 'editTicketStatus';

            const statusOptions = ['open', 'in progress', 'closed'];
            statusOptions.forEach(option => {
                const optionElement = document.createElement('option');
                optionElement.value = option;
                optionElement.textContent = option;
                if (option === ticket.status) {
                    optionElement.selected = true;
                }
                statusInput.appendChild(optionElement);
            });

            // Priority input field
            const priorityLabel = document.createElement('label');
            priorityLabel.setAttribute('for', 'editTicketPriority');
            priorityLabel.textContent = 'Priority';

            const priorityInput = document.createElement('select');
            priorityInput.classList.add('form-control');
            priorityInput.id = 'editTicketPriority';

            const priorityOptions = ['low', 'medium', 'high'];
            priorityOptions.forEach(option => {
                const optionElement = document.createElement('option');
                optionElement.value = option;
                optionElement.textContent = option;
                if (option === ticket.priority) {
                    optionElement.selected = true;
                }
                priorityInput.appendChild(optionElement);
            });

            // Assigned To input field
            const assignedToLabel = document.createElement('label');
            assignedToLabel.setAttribute('for', 'editTicketAssignedTo');
            assignedToLabel.textContent = 'Assigned To';

            const assignedToInput = document.createElement('input');
            assignedToInput.type = 'text';
            assignedToInput.classList.add('form-control');
            assignedToInput.id = 'editTicketAssignedTo';
            assignedToInput.value = ticket.assignedTo;

            // Project ID input field
            const projectIdLabel = document.createElement('label');
            projectIdLabel.setAttribute('for', 'editTicketProjectId');
            projectIdLabel.textContent = 'Project ID';

            const projectIdInput = document.createElement('input');
            projectIdInput.type = 'text';
            projectIdInput.classList.add('form-control');
            projectIdInput.id = 'editTicketProjectId';
            projectIdInput.value = ticket.projectId;
            projectIdInput.required = true;

            // Submit button
            const submitButton = document.createElement('button');
            submitButton.type = 'submit';
            submitButton.classList.add('btn', 'btn-primary', 'me-2');
            submitButton.textContent = 'Save';

            // Cancel button
            const cancelButton = document.createElement('button');
            cancelButton.type = 'button';
            cancelButton.classList.add('btn', 'btn-secondary');
            cancelButton.textContent = 'Cancel';
            cancelButton.addEventListener('click', () => {
                formContainer.remove(); // Remove the form on cancel
                reopenTicketList();
            });

            // Append elements to form
            form.append(
                titleLabel, titleInput,
                descriptionLabel, descriptionInput,
                statusLabel, statusInput,
                priorityLabel, priorityInput,
                assignedToLabel, assignedToInput,
                projectIdLabel, projectIdInput,
                submitButton, cancelButton
            );

            // Append form elements to container
            formContainer.append(formTitle, form);

            // Append form container to the specified div
            const userContentDiv = document.getElementById('dg-app-user-content');
            userContentDiv.innerHTML = ''; // Clear existing content (if any)
            userContentDiv.appendChild(formContainer);

            // Handle form submission
            form.addEventListener('submit', async (event) => {
                event.preventDefault();

                const updatedTicket = {
                    title: titleInput.value,
                    description: descriptionInput.value,
                    status: statusInput.value,
                    priority: priorityInput.value,
                    assignedTo: assignedToInput.value,
                    projectId: projectIdInput.value
                };

                try {
                    const updateResponse = await fetch(`/tickets/${ticketId}`, {
                        method: 'PATCH',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(updatedTicket)
                    });

                    if (!updateResponse.ok) {
                        throw new Error('Failed to update ticket');
                    }

                    const updatedData = await updateResponse.json();
                    console.log('Ticket updated:', updatedData);

                    // Remove the form after successful update
                    formContainer.remove();
                    reopenTicketList();
                    // Optionally, refresh ticket list or perform other actions
                    await fetchAndDisplayTickets(); // Example function to fetch tickets list
                } catch (error) {
                    console.error('Error updating ticket:', error);
                    // Handle error display or logging
                }
            });

        } catch (error) {
            console.error('Error fetching ticket details:', error);
            // Handle error display or logging
        }
    }

    async function deleteTicket(ticketId, listItem) {
        if (!confirm("Are you sure you want to delete this ticket?")) {
            return;
        }

        try {
            const response = await fetch(`/tickets/${ticketId}`, {
                method: 'DELETE'
            });
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            const result = await response.json();
            console.log(result.message);
            // Remove the list item from the DOM
            listItem.remove();
        } catch (error) {
            console.error('There has been a problem with your fetch operation:', error);
        }
    }

    // Function to open the "My Tickets" link
    function reopenTicketList() {
        const ticketsLink = document.getElementById('tickets');
        ticketsLink.click(); // Trigger the click event to reopen the link
    }
</script>


<script>
  document.addEventListener('DOMContentLoaded', () => {
    const leadsLink = document.getElementById('leads');
    leadsLink.addEventListener('click', async (event) => {
        event.preventDefault(); // Prevent default link behavior
        await fetchAndDisplayLeads(); // Fetch leads when link is clicked
    });
    });
    
    async function fetchAndDisplayLeads() {
      try {
          const response = await fetch('/leads'); // Fetch data from the backend
          if (!response.ok) {
              throw new Error('Network response was not ok');
          }
          const leads = await response.json(); // Parse JSON response
  
          const leadListContainer = document.getElementById('leadList');
          leadListContainer.innerHTML = ''; // Clear any existing table rows
  
          // Iterate through the leads and create table rows
          leads.forEach(lead => {
              const row = document.createElement('tr');
  
              // Name column
              const nameCell = document.createElement('td');
              nameCell.textContent = lead.name;
              row.appendChild(nameCell);
  
              // Email column
              const emailCell = document.createElement('td');
              emailCell.textContent = lead.email;
              row.appendChild(emailCell);
  
              // Team ID column
              const teamIdCell = document.createElement('td');
              teamIdCell.textContent = lead.teamId;
              row.appendChild(teamIdCell);
  
              // Actions column with Edit and Delete buttons
              const actionsCell = document.createElement('td');
  
              // Create edit button
              const editButton = document.createElement('button');
              editButton.textContent = 'Edit';
              editButton.classList.add('btn', 'btn-primary', 'btn-sm', 'me-2', 'btn-sm');
              editButton.onclick = () => editLead(lead._id);
              actionsCell.appendChild(editButton);
  
              // Create delete button
              const deleteButton = document.createElement('button');
              deleteButton.textContent = 'Delete';
              deleteButton.classList.add('btn', 'btn-danger', 'btn-sm');
              deleteButton.onclick = () => deleteLead(lead._id, row);
              actionsCell.appendChild(deleteButton);
  
              row.appendChild(actionsCell);
  
              leadListContainer.appendChild(row);
          });
      } catch (error) {
          console.error('There has been a problem with your fetch operation:', error);
      }
  }
  

  async function editLead(leadId) {
    try {
        const response = await fetch(`/leads/${leadId}`);
        if (!response.ok) {
            throw new Error('Failed to fetch lead details');
        }
        const lead = await response.json();

        const formContainer = document.createElement('div');
        formContainer.classList.add('container', 'mt-5');

        const formTitle = document.createElement('h2');
        formTitle.textContent = 'Edit Lead';

        const form = document.createElement('form');
        form.id = 'editLeadForm';

        // Name input field
        const nameLabel = document.createElement('label');
        nameLabel.setAttribute('for', 'editLeadName');
        nameLabel.textContent = 'Name';

        const nameInput = document.createElement('input');
        nameInput.type = 'text';
        nameInput.classList.add('form-control');
        nameInput.id = 'editLeadName';
        nameInput.value = lead.name;
        nameInput.required = true;

        // Email input field
        const emailLabel = document.createElement('label');
        emailLabel.setAttribute('for', 'editLeadEmail');
        emailLabel.textContent = 'Email';

        const emailInput = document.createElement('input');
        emailInput.type = 'email';
        emailInput.classList.add('form-control');
        emailInput.id = 'editLeadEmail';
        emailInput.value = lead.email;
        emailInput.required = true;

        // Team ID input field
        const teamIdLabel = document.createElement('label');
        teamIdLabel.setAttribute('for', 'editLeadTeamId');
        teamIdLabel.textContent = 'Team ID';

        const teamIdInput = document.createElement('input');
        teamIdInput.type = 'text';
        teamIdInput.classList.add('form-control');
        teamIdInput.id = 'editLeadTeamId';
        teamIdInput.value = lead.teamId;
        teamIdInput.required = true;

        // Submit button
        const submitButton = document.createElement('button');
        submitButton.type = 'submit';
        submitButton.classList.add('btn', 'btn-primary', 'me-2');
        submitButton.textContent = 'Save';

        // Cancel button
        const cancelButton = document.createElement('button');
        cancelButton.type = 'button';
        cancelButton.classList.add('btn', 'btn-secondary');
        cancelButton.textContent = 'Cancel';
        cancelButton.addEventListener('click', () => {
            formContainer.remove(); // Remove the form on cancel
            reopenLeadList();
        });

        // Append elements to form
        form.append(
            nameLabel, nameInput,
            emailLabel, emailInput,
            teamIdLabel, teamIdInput,
            submitButton, cancelButton
        );

        // Append form elements to container
        formContainer.append(formTitle, form);

        // Append form container to the specified div
        const userContentDiv = document.getElementById('dg-app-user-content');
        userContentDiv.innerHTML = ''; // Clear existing content (if any)
        userContentDiv.appendChild(formContainer);

        // Handle form submission
        form.addEventListener('submit', async (event) => {
            event.preventDefault();

            const updatedLead = {
                name: nameInput.value,
                email: emailInput.value,
                teamId: teamIdInput.value
            };

            try {
                const updateResponse = await fetch(`/leads/${leadId}`, {
                    method: 'PATCH',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(updatedLead)
                });

                if (!updateResponse.ok) {
                    throw new Error('Failed to update lead');
                }

                const updatedData = await updateResponse.json();
                console.log('Lead updated:', updatedData);

                // Remove the form after successful update
                formContainer.remove();
                reopenLeadList();
                // Optionally, refresh lead list or perform other actions
                await fetchAndDisplayLeads(); // Example function to fetch leads list
            } catch (error) {
                console.error('Error updating lead:', error);
                // Handle error display or logging
            }
        });

    } catch (error) {
        console.error('Error fetching lead details:', error);
        // Handle error display or logging
    }
}

async function deleteLead(leadId, listItem) {
    if (!confirm("Are you sure you want to delete this lead?")) {
        return;
    }

    try {
        const response = await fetch(`/leads/${leadId}`, {
            method: 'DELETE'
        });
        if (!response.ok) {
            throw new Error('Network response was not ok');
        }
        const result = await response.json();
        console.log(result.message);
        // Remove the list item from the DOM
        listItem.remove();
    } catch (error) {
        console.error('There has been a problem with your fetch operation:', error);
    }
}
 // Function to open the "My Leads" link
 function reopenLeadList() {
  const leadsLink = document.getElementById('leads');
  leadsLink.click(); // Trigger the click event to reopen the link
}

</script>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>

    document.addEventListener('DOMContentLoaded', () => {
      const teamLink = document.getElementById('team');
      teamLink.addEventListener('click', async (event) => {
          event.preventDefault(); // Prevent default link behavior
          await fetchOrganizations(); // Fetch organizations when link is clicked
      });
  });
  
  async function fetchAndDisplayTeams() {
    try {
        const response = await fetch('/teams'); // Fetch data from the backend
        if (!response.ok) {
            throw new Error('Network response was not ok');
        }
        const teams = await response.json(); // Parse JSON response

        const teamList = document.getElementById('TeamList');
        teamList.innerHTML = ''; // Clear any existing content

        // Create table
        const table = document.createElement('table');
        table.classList.add('table', 'table-bordered');

        // Create table header
        const thead = document.createElement('thead');
        thead.innerHTML = `
            <tr>
                <th>Name</th>
                <th>Description</th>
                <th>Lead ID</th>
                <th>Actions</th>
            </tr>
        `;
        table.appendChild(thead);

        // Create table body
        const tbody = document.createElement('tbody');
        teams.forEach(team => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${team.name}</td>
                <td>${team.description}</td>
                <td>${team.leadId}</td>
                <td>
                    <button class="btn btn-primary me-2 btn-sm" onclick="editTeam('${team._id}')">Edit</button>
                    <button class="btn btn-danger btn-sm" onclick="deleteTeam('${team._id}', this.parentElement.parentElement)">Delete</button>
                </td>
            `;
            tbody.appendChild(row);
        });
        table.appendChild(tbody);

        // Append table to teamList container
        teamList.appendChild(table);
    } catch (error) {
        console.error('There has been a problem with your fetch operation:', error);
    }
}


    async function editTeam(teamId) {
        try {
            const response = await fetch(`/teams/${teamId}`);
            if (!response.ok) {
                throw new Error('Failed to fetch team details');
            }
            const team = await response.json();

            const formContainer = document.createElement('div');
            formContainer.classList.add('container', 'mt-5');

            const formTitle = document.createElement('h2');
            formTitle.textContent = 'Edit Team';

            const form = document.createElement('form');
            form.id = 'editTeamForm';

            // Name input field
            const nameLabel = document.createElement('label');
            nameLabel.setAttribute('for', 'editName');
            nameLabel.textContent = 'Name';

            const nameInput = document.createElement('input');
            nameInput.type = 'text';
            nameInput.classList.add('form-control');
            nameInput.id = 'editName';
            nameInput.value = team.name;
            nameInput.required = true;

            // Description input field
            const descriptionLabel = document.createElement('label');
            descriptionLabel.setAttribute('for', 'editDescription');
            descriptionLabel.textContent = 'Description';

            const descriptionInput = document.createElement('textarea');
            descriptionInput.classList.add('form-control');
            descriptionInput.id = 'editDescription';
            descriptionInput.textContent = team.description;
            descriptionInput.required = true;

            // Lead ID input field
            const leadIdLabel = document.createElement('label');
            leadIdLabel.setAttribute('for', 'editLeadId');
            leadIdLabel.textContent = 'Lead ID';

            const leadIdInput = document.createElement('input');
            leadIdInput.type = 'text';
            leadIdInput.classList.add('form-control');
            leadIdInput.id = 'editLeadId';
            leadIdInput.value = team.leadId;
            leadIdInput.required = true;

            // Submit button
            const submitButton = document.createElement('button');
            submitButton.type = 'submit';
            submitButton.classList.add('btn', 'btn-primary', 'me-2');
            submitButton.textContent = 'Save';

            // Cancel button
            const cancelButton = document.createElement('button');
            cancelButton.type = 'button';
            cancelButton.classList.add('btn', 'btn-secondary');
            cancelButton.textContent = 'Cancel';
            cancelButton.addEventListener('click', () => {
                formContainer.remove(); // Remove the form on cancel
                reopenTeamList();
            });

            // Append elements to form
            form.append(
                nameLabel, nameInput,
                descriptionLabel, descriptionInput,
                leadIdLabel, leadIdInput,
                submitButton, cancelButton
            );

            // Append form elements to container
            formContainer.append(formTitle, form);

            // Append form container to the specified div
            const userContentDiv = document.getElementById('dg-app-user-content');
            userContentDiv.innerHTML = ''; // Clear existing content (if any)
            userContentDiv.appendChild(formContainer);

            // Handle form submission
            form.addEventListener('submit', async (event) => {
                event.preventDefault();

                const updatedTeam = {
                    name: nameInput.value,
                    description: descriptionInput.value,
                    leadId: leadIdInput.value
                };

                try {
                    const updateResponse = await fetch(`/teams/${teamId}`, {
                        method: 'PATCH',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(updatedTeam)
                    });

                    if (!updateResponse.ok) {
                        throw new Error('Failed to update team');
                    }

                    const updatedData = await updateResponse.json();
                    console.log('Team updated:', updatedData);

                    // Remove the form after successful update
                    formContainer.remove();
                    reopenTeamList();
                    // Optionally, refresh team list or perform other actions
                    await fetchAndDisplayTeams(); // Example function to fetch teams list
                } catch (error) {
                    console.error('Error updating team:', error);
                    // Handle error display or logging
                }
            });

        } catch (error) {
            console.error('Error fetching team details:', error);
            // Handle error display or logging
        }
    }

    async function deleteTeam(teamId, listItem) {
        if (!confirm("Are you sure you want to delete this team?")) {
            return;
        }

        try {
            const response = await fetch(`/teams/${teamId}`, {
                method: 'DELETE'
            });
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            const result = await response.json();
            console.log(result.message);
            // Remove the list item from the DOM
            listItem.remove();
        } catch (error) {
            console.error('There has been a problem with your fetch operation:', error);
        }
    }

    // Function to open the "My Organisation" link
function  reopenTeamList() {
  const teamLink = document.getElementById('team');
  teamLink.click(); // Trigger the click event to reopen the link
}
</script>

<!-- JavaScript at the end of your HTML body -->
<script>
  document.addEventListener('DOMContentLoaded', () => {
      const collectionsLink = document.getElementById('collectionsLink');
      collectionsLink.addEventListener('click', async (event) => {
          event.preventDefault(); // Prevent default link behavior
          await fetchOrganizations(); // Fetch organizations when link is clicked
      });
  });

  // Function to fetch organizations and display them
  async function fetchOrganizations() {
      try {
          const response = await fetch('/organizations');
          if (!response.ok) {
              throw new Error('Failed to fetch organizations');
          }
          const organizations = await response.json();
          const organizationList = document.getElementById('organizationList');
          organizationList.innerHTML = ''; // Clear previous list

          organizations.forEach(org => {
            const tr = document.createElement('tr');
            tr.innerHTML = `
                <td>${org.name}</td>
                <td>${org.email}</td>
                <td>${org.address}</td>
                <td>${org.phone}</td>
                <td>
                    <button class="btn btn-primary me-2 btn-sm" onclick="editOrganization('${org._id}')">Edit</button>
                    <button class="btn btn-danger btn-sm" onclick="deleteOrganization('${org._id}')">Delete</button>
                </td>
            `;
            organizationList.appendChild(tr);
        });
      } catch (error) {
          console.error('Error fetching organizations:', error);
      }
  }
  // Function to delete an organization
  async function deleteOrganization(id) {
      try {
          const response = await fetch(`/organizations/${id}`, {
              method: 'DELETE'
          });
          if (!response.ok) {
              throw new Error('Failed to delete organization');
          }
          const data = await response.json();
          console.log(data.message); // Log success message
          await fetchOrganizations(); // Refresh the list after deletion
      } catch (error) {
          console.error('Error deleting organization:', error);
      }
  }

  // Function to dynamically create and handle organization edit form
async function editOrganization(id) {
  try {
      // Fetch organization data
      const response = await fetch(`/organizations/${id}`);
      if (!response.ok) {
          throw new Error('Failed to fetch organization details');
      }
      const organization = await response.json();
      
      // Create form elements
      const formContainer = document.createElement('div');
      formContainer.classList.add('container', 'mt-5');
      
      const formTitle = document.createElement('h2');
      formTitle.textContent = 'Edit Organization';
      
      const form = document.createElement('form');
      form.id = 'editOrganizationForm';
      
      // Name input field
      const nameLabel = document.createElement('label');
      nameLabel.setAttribute('for', 'editName');
      nameLabel.textContent = 'Name';
      
      const nameInput = document.createElement('input');
      nameInput.type = 'text';
      nameInput.classList.add('form-control');
      nameInput.id = 'editName';
      nameInput.value = organization.name;
      nameInput.required = true;
      
      // Address input field
      const addressLabel = document.createElement('label');
      addressLabel.setAttribute('for', 'editAddress');
      addressLabel.textContent = 'Address';
      
      const addressInput = document.createElement('input');
      addressInput.type = 'text';
      addressInput.classList.add('form-control');
      addressInput.id = 'editAddress';
      addressInput.value = organization.address;
      addressInput.required = true;
      
      // Phone input field
      const phoneLabel = document.createElement('label');
      phoneLabel.setAttribute('for', 'editPhone');
      phoneLabel.textContent = 'Phone';
      
      const phoneInput = document.createElement('input');
      phoneInput.type = 'text';
      phoneInput.classList.add('form-control');
      phoneInput.id = 'editPhone';
      phoneInput.value = organization.phone;
      phoneInput.required = true;
      
      // Email input field
      const emailLabel = document.createElement('label');
      emailLabel.setAttribute('for', 'editEmail');
      emailLabel.textContent = 'Email';
      
      const emailInput = document.createElement('input');
      emailInput.type = 'email';
      emailInput.classList.add('form-control');
      emailInput.id = 'editEmail';
      emailInput.value = organization.email;
      emailInput.required = true;
      
      // Submit button
      const submitButton = document.createElement('button');
      submitButton.type = 'submit';
      submitButton.classList.add('btn', 'btn-primary', 'me-2');
      submitButton.textContent = 'Save';
      
      // Cancel button
      const cancelButton = document.createElement('button');
      cancelButton.type = 'button';
      cancelButton.classList.add('btn', 'btn-secondary');
      cancelButton.textContent = 'Cancel';
      cancelButton.addEventListener('click', () => {
          formContainer.remove(); // Remove the form on cancel
          openOrganizationsLink(); // Reopen the "My Organisation" link
      });
      
      // Append elements to form
      form.append(
          nameLabel, nameInput,
          addressLabel, addressInput,
          phoneLabel, phoneInput,
          emailLabel, emailInput,
          submitButton, cancelButton
      );
      
      // Append form elements to container
      formContainer.append(formTitle, form);
      
      // Append form container to the specified div
      const userContentDiv = document.getElementById('dg-app-user-content');
      userContentDiv.innerHTML = ''; // Clear existing content (if any)
      userContentDiv.appendChild(formContainer);
      
      // Handle form submission
      form.addEventListener('submit', async (event) => {
          event.preventDefault();
          
          const updatedOrganization = {
              name: nameInput.value,
              address: addressInput.value,
              phone: phoneInput.value,
              email: emailInput.value
          };
          
          try {
              const updateResponse = await fetch(`/organizations/${id}`, {
                  method: 'PATCH',
                  headers: {
                      'Content-Type': 'application/json'
                  },
                  body: JSON.stringify(updatedOrganization)
              });
              
              if (!updateResponse.ok) {
                  throw new Error('Failed to update organization');
              }
              
              const updatedData = await updateResponse.json();
              console.log('Organization updated:', updatedData);
              
              // Remove the form after successful update
              formContainer.remove();
              openOrganizationsLink(); // Reopen the "My Organisation" link
              
              // Optionally, refresh organization list or perform other actions
              await fetchOrganizations(); // Example function to fetch organizations list
          } catch (error) {
              console.error('Error updating organization:', error);
              // Handle error display or logging
          }
      });
      
  } catch (error) {
      console.error('Error fetching organization details:', error);
      // Handle error display or logging
  }
}

// Function to open the "My Organisation" link
function openOrganizationsLink() {
  const collectionsLink = document.getElementById('collectionsLink');
  collectionsLink.click(); // Trigger the click event to reopen the link
}
</script>

<script>
  document.addEventListener('DOMContentLoaded', () => {
      const projectsLink = document.getElementById('projects');
      projectsLink.addEventListener('click', async (event) => {
          event.preventDefault(); // Prevent default link behavior
          await fetchAndDisplayProjects(); // Fetch projects when link is clicked
      });
  });

  async function fetchAndDisplayProjects() {
    try {
        const response = await fetch('/projects'); // Fetch data from the backend
        if (!response.ok) {
            throw new Error('Network response was not ok');
        }
        const projects = await response.json(); // Parse JSON response

        const projectListContainer = document.getElementById('projectList');
        projectListContainer.innerHTML = ''; // Clear any existing table rows

        // Iterate through the projects and create table rows
        projects.forEach(project => {
            const row = document.createElement('tr');

            // Name
            let cell = document.createElement('td');
            cell.textContent = project.name;
            row.appendChild(cell);

            // Description
            cell = document.createElement('td');
            cell.textContent = project.description;
            row.appendChild(cell);

            // Start Date
            cell = document.createElement('td');
            cell.textContent = project.startDate;
            row.appendChild(cell);

            // End Date
            cell = document.createElement('td');
            cell.textContent = project.endDate;
            row.appendChild(cell);

            // Team ID
            cell = document.createElement('td');
            cell.textContent = project.teamId;
            row.appendChild(cell);

            // Actions (Edit and Delete buttons)
            cell = document.createElement('td');
            
            // Edit button
            const editButton = document.createElement('button');
            editButton.textContent = 'Edit';
            editButton.classList.add('btn', 'btn-primary', 'me-2', 'btn-sm' );
            editButton.onclick = () => editProject(project._id);
            cell.appendChild(editButton);

            // Delete button
            const deleteButton = document.createElement('button');
            deleteButton.textContent = 'Delete';
            deleteButton.classList.add('btn', 'btn-danger', 'btn-sm');
            deleteButton.onclick = () => deleteProject(project._id, row);
            cell.appendChild(deleteButton);

            row.appendChild(cell);

            projectListContainer.appendChild(row);
        });
    } catch (error) {
        console.error('There has been a problem with your fetch operation:', error);
    }
}


  async function editProject(projectId) {
      try {
          const response = await fetch(`/projects/${projectId}`);
          if (!response.ok) {
              throw new Error('Failed to fetch project details');
          }
          const project = await response.json();

          const formContainer = document.createElement('div');
          formContainer.classList.add('container', 'mt-5');

          const formTitle = document.createElement('h2');
          formTitle.textContent = 'Edit Project';

          const form = document.createElement('form');
          form.id = 'editProjectForm';

          // Name input field
          const nameLabel = document.createElement('label');
          nameLabel.setAttribute('for', 'editProjectName');
          nameLabel.textContent = 'Name';

          const nameInput = document.createElement('input');
          nameInput.type = 'text';
          nameInput.classList.add('form-control');
          nameInput.id = 'editProjectName';
          nameInput.value = project.name;
          nameInput.required = true;

          // Description input field
          const descriptionLabel = document.createElement('label');
          descriptionLabel.setAttribute('for', 'editProjectDescription');
          descriptionLabel.textContent = 'Description';

          const descriptionInput = document.createElement('textarea');
          descriptionInput.classList.add('form-control');
          descriptionInput.id = 'editProjectDescription';
          descriptionInput.textContent = project.description;
          descriptionInput.required = true;

          // Start Date input field
          const startDateLabel = document.createElement('label');
          startDateLabel.setAttribute('for', 'editProjectStartDate');
          startDateLabel.textContent = 'Start Date';

          const startDateInput = document.createElement('input');
          startDateInput.type = 'date';
          startDateInput.classList.add('form-control');
          startDateInput.id = 'editProjectStartDate';
          startDateInput.value = project.startDate;
          startDateInput.required = true;

          // End Date input field
          const endDateLabel = document.createElement('label');
          endDateLabel.setAttribute('for', 'editProjectEndDate');
          endDateLabel.textContent = 'End Date';

          const endDateInput = document.createElement('input');
          endDateInput.type = 'date';
          endDateInput.classList.add('form-control');
          endDateInput.id = 'editProjectEndDate';
          endDateInput.value = project.endDate;

          // Team ID input field
          const teamIdLabel = document.createElement('label');
          teamIdLabel.setAttribute('for', 'editProjectTeamId');
          teamIdLabel.textContent = 'Team ID';

          const teamIdInput = document.createElement('input');
          teamIdInput.type = 'text';
          teamIdInput.classList.add('form-control');
          teamIdInput.id = 'editProjectTeamId';
          teamIdInput.value = project.teamId;
          teamIdInput.required = true;

          // Submit button
          const submitButton = document.createElement('button');
          submitButton.type = 'submit';
          submitButton.classList.add('btn', 'btn-primary', 'me-2');
          submitButton.textContent = 'Save';

          // Cancel button
          const cancelButton = document.createElement('button');
          cancelButton.type = 'button';
          cancelButton.classList.add('btn', 'btn-secondary');
          cancelButton.textContent = 'Cancel';
          cancelButton.addEventListener('click', () => {
              formContainer.remove(); // Remove the form on cancel
              reopenProjectList();
          });

          // Append elements to form
          form.append(
              nameLabel, nameInput,
              descriptionLabel, descriptionInput,
              startDateLabel, startDateInput,
              endDateLabel, endDateInput,
              teamIdLabel, teamIdInput,
              submitButton, cancelButton
          );

          // Append form elements to container
          formContainer.append(formTitle, form);

          // Append form container to the specified div
          const userContentDiv = document.getElementById('dg-app-user-content');
          userContentDiv.innerHTML = ''; // Clear existing content (if any)
          userContentDiv.appendChild(formContainer);

          // Handle form submission
          form.addEventListener('submit', async (event) => {
              event.preventDefault();

              const updatedProject = {
                  name: nameInput.value,
                  description: descriptionInput.value,
                  startDate: startDateInput.value,
                  endDate: endDateInput.value,
                  teamId: teamIdInput.value
              };

              try {
                  const updateResponse = await fetch(`/projects/${projectId}`, {
                      method: 'PATCH',
                      headers: {
                          'Content-Type': 'application/json'
                      },
                      body: JSON.stringify(updatedProject)
                  });

                  if (!updateResponse.ok) {
                      throw new Error('Failed to update project');
                  }

                  const updatedData = await updateResponse.json();
                  console.log('Project updated:', updatedData);

                  // Remove the form after successful update
                  formContainer.remove();
                  reopenProjectList();
                  // Optionally, refresh project list or perform other actions
                  await fetchAndDisplayProjects(); // Example function to fetch projects list
              } catch (error) {
                  console.error('Error updating project:', error);
                  // Handle error display or logging
              }
          });

      } catch (error) {
          console.error('Error fetching project details:', error);
          // Handle error display or logging
      }
  }

  async function deleteProject(projectId, listItem) {
      if (!confirm("Are you sure you want to delete this project?")) {
          return;
      }

      try {
          const response = await fetch(`/projects/${projectId}`, {
              method: 'DELETE'
          });
          if (!response.ok) {
              throw new Error('Network response was not ok');
          }
          const result = await response.json();
          console.log(result.message);
          // Remove the list item from the DOM
          listItem.remove();
      } catch (error) {
          console.error('There has been a problem with your fetch operation:', error);
      }
  }

  // Function to open the "My Projects" link
  function reopenProjectList() {
      const projectsLink = document.getElementById('projects');
      projectsLink.click(); // Trigger the click event to reopen the link
  }
</script>


<script src="./function/bootstrap-js-dg-app/bootstrap.bundle.min.js"></script>
<script src="./function/bootstrap-js-dg-app/bootstrap-sidebar-clopsable-dg-app.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.3.2/dist/chart.umd.js" integrity="sha384-eI7PSr3L1XLISH8JdDII5YN/njoSsxfbrkCTnJrzXt+ENP5MOVBxD+l6sEG4zoLp" crossorigin="anonymous"></script>
<script src="./function/bootstrap-js-dg-app/dashboard.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script src="https://kit.fontawesome.com/a076d05399.js"></script>
<script type="module" src="./function/main.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>